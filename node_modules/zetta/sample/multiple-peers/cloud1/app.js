var uuid = require('node-uuid');
module.exports = function(server) {
//  var ledQueryChi = server.from('chicago').where({ type: 'led' });
  var ledQueryDet = server.from('detroit').where({ type: 'led' });
  server.observe([ledQueryDet], function(det) {

    console.log('found led')
    det.on('turn-on', function() {
      console.log('chicago: turn-on');
    });
  });

  var photoQueryDet = server.from('detroit').where({ type: 'photocell' });
  server.observe([photoQueryDet], function(det) {
    var id = uuid.v4();
    console.log('found photocell', id)
    det.streams.intensity.on('data', function(ret){
      console.log('Photocell:',id, ret.data);
    });
  });


};
